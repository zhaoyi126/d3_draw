<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>china map</title>
    <script src="/public/libs/d3.v7.min.js" type="text/javascript"></script>
    <script src="/public/libs/jquery-2.1.1.min.js" type="text/javascript"></script>
</head>
<body>
<style type="text/css">
    /*body {background: #999;}*/
    path {
        stroke:red; fill:green; stroke-width:2;
    }
</style>

<div style="width: 50%;margin: 0 auto;padding-top: 20px;">
    <h1>china map</h1>
    <div id="container"></div>
</div>

<script type="text/javascript">
    const w = 700;
    const h = 500;

    const svg = d3.select('div#container')
        .append('svg')
        .attr('width', w)
        .attr('height', h)

    const margin = {
        top: 20,
        left: 20,
        bottom: 20,
    }

    const main = svg.append('g')
        .attr('class', 'main')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

    const cos = Math.cos;
    const sin = Math.sin;
    const sqrt = Math.sqrt;
    const pi = Math.PI;


    d3.json('/public/data/china.json').then(data => {

        const projection = d3.geoNaturalEarth1().fitSize([w, h], data);
        const path = d3.geoPath()
            .projection(projection);

        // console.log(data.features);
        main.selectAll("path")
            .data(data.features)
            .enter()
            .append("path")
            .attr("d", path)
            .attr('stroke', '#000')

    })

</script>
</body>
</html>