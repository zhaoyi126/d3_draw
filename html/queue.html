<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>queue</title>
    <script src="/public/libs/d3.v7.min.js" type="text/javascript"></script>
    <script src="/public/libs/jquery-2.1.1.min.js" type="text/javascript"></script>
</head>
<body>
<style type="text/css">
    /*body {background: #999;}*/
    path {
        stroke:#000;
        /*fill:none;*/
        stroke-width:1;
    }
    text {text-anchor: middle;}
    text.small {font-size: 13px;}
</style>

<div style="width: 50%;margin: 0 auto;padding-top: 20px;">
    <h1>queue</h1>
    <div id="container"></div>
</div>

<script type="text/javascript">
    const sin = Math.sin;
    const cos = Math.cos;
    const floor = Math.floor;
    const round = Math.round;
    const pi = Math.PI;
    const abs = Math.abs;
    const sqrt = Math.sqrt;
    const atan = Math.atan;

    const w = 500;
    const h = 400;

    const svg = d3.select('div#container')
        .append('svg')
        .attr('width', w)
        .attr('height', h)

    const margin = {
        top: 20,
        left: 20,
        bottom: 20,
        right: 20,
    }

    const main = svg.append('g')
        .attr('class', 'main')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);

    const N = 4;
    const r = h/N/2;
    d3.range(N-1).map(row => {
        d3.range(N).map(d => {
            const g = main.append('g')
                .attr('transform', `translate(${(d-0.05)*w/N}, ${(row+0.5)*h*1.2/N})`);

            g.append('circle')
                .attr('cx', r)
                .attr('cy', 0)
                .attr('r', r)
                .attr('stroke', '#000')
                .attr('stroke-width', 1)
                .attr('fill', '#fff')

            const path = `M 0 0 A ${r} ${r} 0 0 0 ${r*2} 0Z`;
            g.append('path')
                .attr('d', path)
                .style('fill', 'yellow')

            const text = g.append('text')
                g.append('text')
                    .text('1米')
                    .style('stroke', 'red')
                    .style('stroke-width', 1.2)
                    .attr('transform', `translate(${r}, ${-r*0.35})`);

                g.append('text')
                    .text('安全距离')
                    .attr('class', 'small')
                    .attr('transform', `translate(${r}, ${r*0.35})`);
                g.append('text')
                    .text('等候点')
                    .attr('class', 'small')
                    .attr('transform', `translate(${r}, ${r*0.75})`);
        })
    })



</script>
</body>
</html>